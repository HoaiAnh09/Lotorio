<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Thanh toán - Lotorio</title>
  <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Baloo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Baloo', sans-serif;
        }
        .custom-yellow-text {
            color: #FFD700;
        }
    </style>
</head>
<body class="bg-white">
    <div id="nav-placeholder"></div>


  <div class="max-w-6xl mx-auto mt-10 bg-white p-6 rounded-lg shadow-md">
    <h1 class="text-3xl font-bold mb-6 text-black flex items-center">
      <span class="text-2xl mr-3">←</span> Thông tin thanh toán
    </h1>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Cột trái: Danh sách món -->
      <div class="md:col-span-2">
        <ul id="order-items" class="divide-y divide-gray-200 mb-6"></ul>
        <div class="mt-6">
          <h2 class="font-semibold mb-2">Ghi chú</h2>
          <div class="border rounded-md p-3 bg-gray-50" id="order-note">Không có ghi chú.</div>
        </div>
      </div>

      <!-- Cột phải: Thông tin giao hàng và QR -->
      <div>
        <div class="bg-gray-100 p-4 rounded-md mb-4 shadow-sm">
          <h2 class="font-semibold text-sm text-gray-600">Địa chỉ giao hàng</h2>
          <p class="font-bold text-lg leading-snug mt-1" id="address">...</p>

          <h2 class="font-semibold text-sm text-gray-600 mt-4">Thông tin người nhận</h2>
          <p><strong id="customer-name">...</strong></p>
          <p>SĐT người nhận: <span id="customer-phone">...</span></p>

          <p class="text-xs text-gray-500 mt-2">Thời gian tiếp nhận đơn hàng từ<br>08:00 đến 21:30 hằng ngày</p>
        </div>

        <div class="text-center">
          <img src="img/QR-code.jpg" alt="QR thanh toán" class="w-40 h-40 mx-auto mb-2">
          <div class="text-left text-sm">
            <p><strong>Số tài khoản:</strong> 686868686868</p>
            <p><strong>Ngân hàng:</strong> Techcombank</p>
            <p><strong>Người nhận:</strong> LOTORIO</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Tổng tiền & nút hoàn tất -->
    <div class="flex justify-between items-center mt-10">
      <div class="bg-yellow-400 text-black font-bold px-6 py-3 rounded-lg shadow">
        Tổng tiền: <span id="total-price">0 đ</span>
      </div>
      <button onclick="window.location.href='DonHang.html'" class="bg-yellow-400 text-black font-bold px-6 py-3 rounded-lg shadow hover:bg-yellow-300 transition">
        Hoàn tất
      </button>
    </div>
  </div>

    <div id="footer-placeholder"></div>

  <script>
    fetch('nav.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('nav-placeholder').innerHTML = data;
            })
            .catch(error => console.error('Error loading nav:', error));

        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            })
            .catch(error => console.error('Error loading footer:', error));
    
            const data = JSON.parse(localStorage.getItem('pendingPayment') || '{}');

    if (!data || !data.items || data.items.length === 0) {
      document.body.innerHTML = '<div class="text-center mt-10 text-red-600 font-bold">Không có thông tin thanh toán.</div>';
    } else {
      const itemsContainer = document.getElementById('order-items');
      const noteContainer = document.getElementById('order-note');
      const addressEl = document.getElementById('address');
      const nameEl = document.getElementById('customer-name');
      const phoneEl = document.getElementById('customer-phone');
      const totalEl = document.getElementById('total-price');

      // Hiển thị món ăn
      data.items.forEach(item => {
        const itemEl = document.createElement('li');
        itemEl.className = 'flex justify-between items-center py-3';
        itemEl.innerHTML = `
          <div>
            <p class="font-semibold">${item.name}</p>
            <p class="text-sm text-gray-500">Số lượng: ${item.qty}</p>
          </div>
          <div class="font-semibold">${(item.price * item.qty).toLocaleString()} đ</div>
        `;
        itemsContainer.appendChild(itemEl);
      });

      // Hiển thị ghi chú
      noteContainer.textContent = data.note || 'Không có ghi chú.';

      // Thông tin người nhận
      addressEl.textContent = data.customer?.address || '';
      nameEl.textContent = data.customer?.name || '';
      phoneEl.textContent = data.customer?.phone || '';
      totalEl.textContent = data.total?.toLocaleString() + ' đ';
    }
  </script>
</body>
</html>
